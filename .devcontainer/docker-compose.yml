---
version: '3'
services:
  dev:
    user: node
    image: mcr.microsoft.com/vscode/devcontainers/javascript-node:0-16
    ports:
      # Rollup
      - 41000:41000
    volumes:
      - ..:/workspace:cached
    command: [sleep, infinity]
  hass:
    extends:
      file: ./frigate-hass-integration/docker-compose.yml
      service: hass
    volumes:
      - ./config/.storage/lovelace_resources:/config/preconfig/.storage/lovelace_resources
      - ./config/.storage/lovelace:/config/preconfig/.storage/lovelace
  frigate:
    extends:
      file: ./frigate-hass-integration/docker-compose.yml
      service: frigate
  mqtt:
    extends:
      file: ./frigate-hass-integration/docker-compose.yml
      service: mqtt
